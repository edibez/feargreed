"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/fng/aggregate";
exports.ids = ["pages/api/fng/aggregate"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffng%2Faggregate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffng%2Faggregate.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffng%2Faggregate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffng%2Faggregate.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_fng_aggregate_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/fng/aggregate.js */ \"(api)/./pages/api/fng/aggregate.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_fng_aggregate_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_fng_aggregate_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/fng/aggregate\",\n        pathname: \"/api/fng/aggregate\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_fng_aggregate_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmZuZyUyRmFnZ3JlZ2F0ZSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGZm5nJTJGYWdncmVnYXRlLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3lEO0FBQ3pEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx3REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsd0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm5nLWNsb25lLz85YTYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvZm5nL2FnZ3JlZ2F0ZS5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2ZuZy9hZ2dyZWdhdGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9mbmcvYWdncmVnYXRlXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffng%2Faggregate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffng%2Faggregate.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/fng/aggregate.js":
/*!************************************!*\
  !*** ./pages/api/fng/aggregate.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n// Aggregate Fear & Greed index from multiple sources.\n// Sources: Alternative.me (implemented) + 3 additional sources (stubs) to be defined.\n// Env vars: set API keys/secrets in .env.local; see README and .env.example.\nconst TTL = 5 * 60 * 1000; // 5 minutes cache\nlet cache = {\n    data: null,\n    ts: 0\n};\n// Helper: safe fetch with timeout\nasync function safeFetch(url, options = {}, timeoutMs = 10000) {\n    const controller = new AbortController();\n    const t = setTimeout(()=>controller.abort(), timeoutMs);\n    try {\n        const r = await fetch(url, {\n            ...options,\n            signal: controller.signal\n        });\n        if (!r.ok) throw new Error(`HTTP ${r.status}`);\n        return await r.json();\n    } finally{\n        clearTimeout(t);\n    }\n}\n// Source 1: Alternative.me\nasync function sourceAlternative() {\n    const json = await safeFetch(\"https://api.alternative.me/fng/?limit=1\");\n    const item = json?.data?.[0];\n    if (!item) throw new Error(\"alt.me: empty data\");\n    return {\n        name: \"alternative.me\",\n        value: Number(item.value),\n        raw: item\n    };\n}\n// Source 2: CoinMarketCap Fear & Greed (historical) â€” use latest value\nasync function sourceTwo() {\n    const key = process.env.CMC_API_KEY;\n    if (!key) return null;\n    try {\n        // Try the latest endpoint first\n        const json = await safeFetch(\"https://pro-api.coinmarketcap.com/v3/fear-and-greed/latest\", {\n            headers: {\n                \"X-CMC_PRO_API_KEY\": key,\n                \"Accept\": \"application/json\"\n            }\n        });\n        // CMC API response shape: { data: { value: number, value_classification: string, timestamp: string, ... } }\n        const item = json?.data;\n        if (!item || item.value === undefined) throw new Error(\"CMC: empty data\");\n        return {\n            name: \"coinmarketcap\",\n            value: Number(item.value),\n            raw: item\n        };\n    } catch (err) {\n        console.error(\"CoinMarketCap API error:\", err.message);\n        return null;\n    }\n}\n// Source 3: CoinStats Fear and Greed\nasync function sourceThree() {\n    const key = process.env.COINSTATS_API_KEY;\n    if (!key) return null;\n    try {\n        // CoinStats API endpoint for Fear & Greed Index\n        const json = await safeFetch(\"https://openapiv1.coinstats.app/insights/fear-and-greed\", {\n            headers: {\n                \"X-API-KEY\": key,\n                \"Accept\": \"application/json\"\n            }\n        });\n        // Expected shape: { now: { value: number, ... }, ... }\n        const val = json?.now?.value;\n        if (val === undefined) throw new Error(\"CoinStats: no now.value field\");\n        return {\n            name: \"coinstats\",\n            value: Number(val),\n            raw: json\n        };\n    } catch (err) {\n        console.error(\"CoinStats API error:\", err.message);\n        return null;\n    }\n}\nfunction aggregate(values) {\n    const nums = values.map((v)=>v.value).filter((v)=>typeof v === \"number\" && !Number.isNaN(v));\n    if (nums.length === 0) return null;\n    const sum = nums.reduce((a, b)=>a + b, 0);\n    const avg = Math.round(sum / nums.length);\n    return avg;\n}\nasync function handler(req, res) {\n    try {\n        const now = Date.now();\n        if (cache.data && now - cache.ts < TTL) {\n            return res.status(200).json({\n                cached: true,\n                ...cache.data\n            });\n        }\n        const results = await Promise.allSettled([\n            sourceAlternative(),\n            sourceTwo(),\n            sourceThree()\n        ]);\n        // Build a 3-slot sources array, defaulting undefined to value 0 per spec\n        const slots = results.map((r, idx)=>{\n            if (r.status === \"fulfilled\" && r.value) {\n                return {\n                    name: r.value.name,\n                    value: Number(r.value.value)\n                };\n            }\n            // Default for undefined/missing source\n            return {\n                name: `source${idx + 1}`,\n                value: 0\n            };\n        });\n        // Aggregate across all 3 sources, even if some are zero\n        const sum = slots.reduce((a, b)=>a + (Number.isFinite(b.value) ? b.value : 0), 0);\n        const agg = Math.round(sum / 3);\n        const payload = {\n            source_count: 3,\n            aggregate_value: agg,\n            sources: slots\n        };\n        cache = {\n            data: payload,\n            ts: now\n        };\n        return res.status(200).json({\n            cached: false,\n            ...payload\n        });\n    } catch (err) {\n        console.error(\"aggregate error:\", err);\n        return res.status(500).json({\n            error: \"aggregation_failed\",\n            details: err.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvZm5nL2FnZ3JlZ2F0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsc0RBQXNEO0FBQ3RELHNGQUFzRjtBQUN0Riw2RUFBNkU7QUFFN0UsTUFBTUEsTUFBTSxJQUFJLEtBQUssTUFBTSxrQkFBa0I7QUFDN0MsSUFBSUMsUUFBUTtJQUFFQyxNQUFNO0lBQU1DLElBQUk7QUFBRTtBQUVoQyxrQ0FBa0M7QUFDbEMsZUFBZUMsVUFBVUMsR0FBRyxFQUFFQyxVQUFVLENBQUMsQ0FBQyxFQUFFQyxZQUFZLEtBQUs7SUFDM0QsTUFBTUMsYUFBYSxJQUFJQztJQUN2QixNQUFNQyxJQUFJQyxXQUFXLElBQU1ILFdBQVdJLEtBQUssSUFBSUw7SUFDL0MsSUFBSTtRQUNGLE1BQU1NLElBQUksTUFBTUMsTUFBTVQsS0FBSztZQUFFLEdBQUdDLE9BQU87WUFBRVMsUUFBUVAsV0FBV08sTUFBTTtRQUFDO1FBQ25FLElBQUksQ0FBQ0YsRUFBRUcsRUFBRSxFQUFFLE1BQU0sSUFBSUMsTUFBTSxDQUFDLEtBQUssRUFBRUosRUFBRUssTUFBTSxDQUFDLENBQUM7UUFDN0MsT0FBTyxNQUFNTCxFQUFFTSxJQUFJO0lBQ3JCLFNBQVU7UUFDUkMsYUFBYVY7SUFDZjtBQUNGO0FBRUEsMkJBQTJCO0FBQzNCLGVBQWVXO0lBQ2IsTUFBTUYsT0FBTyxNQUFNZixVQUFVO0lBQzdCLE1BQU1rQixPQUFPSCxNQUFNakIsTUFBTSxDQUFDLEVBQUU7SUFDNUIsSUFBSSxDQUFDb0IsTUFBTSxNQUFNLElBQUlMLE1BQU07SUFDM0IsT0FBTztRQUNMTSxNQUFNO1FBQ05DLE9BQU9DLE9BQU9ILEtBQUtFLEtBQUs7UUFDeEJFLEtBQUtKO0lBQ1A7QUFDRjtBQUVBLHVFQUF1RTtBQUN2RSxlQUFlSztJQUNiLE1BQU1DLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVztJQUNuQyxJQUFJLENBQUNILEtBQUssT0FBTztJQUVqQixJQUFJO1FBQ0YsZ0NBQWdDO1FBQ2hDLE1BQU1ULE9BQU8sTUFBTWYsVUFBVSw4REFBOEQ7WUFDekY0QixTQUFTO2dCQUNQLHFCQUFxQko7Z0JBQ3JCLFVBQVU7WUFDWjtRQUNGO1FBRUEsNEdBQTRHO1FBQzVHLE1BQU1OLE9BQU9ILE1BQU1qQjtRQUNuQixJQUFJLENBQUNvQixRQUFRQSxLQUFLRSxLQUFLLEtBQUtTLFdBQVcsTUFBTSxJQUFJaEIsTUFBTTtRQUV2RCxPQUFPO1lBQ0xNLE1BQU07WUFDTkMsT0FBT0MsT0FBT0gsS0FBS0UsS0FBSztZQUN4QkUsS0FBS0o7UUFDUDtJQUNGLEVBQUUsT0FBT1ksS0FBSztRQUNaQyxRQUFRQyxLQUFLLENBQUMsNEJBQTRCRixJQUFJRyxPQUFPO1FBQ3JELE9BQU87SUFDVDtBQUNGO0FBRUEscUNBQXFDO0FBQ3JDLGVBQWVDO0lBQ2IsTUFBTVYsTUFBTUMsUUFBUUMsR0FBRyxDQUFDUyxpQkFBaUI7SUFDekMsSUFBSSxDQUFDWCxLQUFLLE9BQU87SUFFakIsSUFBSTtRQUNGLGdEQUFnRDtRQUNoRCxNQUFNVCxPQUFPLE1BQU1mLFVBQVUsMkRBQTJEO1lBQ3RGNEIsU0FBUztnQkFDUCxhQUFhSjtnQkFDYixVQUFVO1lBQ1o7UUFDRjtRQUVBLHVEQUF1RDtRQUN2RCxNQUFNWSxNQUFNckIsTUFBTXNCLEtBQUtqQjtRQUN2QixJQUFJZ0IsUUFBUVAsV0FBVyxNQUFNLElBQUloQixNQUFNO1FBRXZDLE9BQU87WUFDTE0sTUFBTTtZQUNOQyxPQUFPQyxPQUFPZTtZQUNkZCxLQUFLUDtRQUNQO0lBQ0YsRUFBRSxPQUFPZSxLQUFLO1FBQ1pDLFFBQVFDLEtBQUssQ0FBQyx3QkFBd0JGLElBQUlHLE9BQU87UUFDakQsT0FBTztJQUNUO0FBQ0Y7QUFFQSxTQUFTSyxVQUFVQyxNQUFNO0lBQ3ZCLE1BQU1DLE9BQU9ELE9BQU9FLEdBQUcsQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRXRCLEtBQUssRUFBRXVCLE1BQU0sQ0FBQ0QsQ0FBQUEsSUFBSyxPQUFPQSxNQUFNLFlBQVksQ0FBQ3JCLE9BQU91QixLQUFLLENBQUNGO0lBQ3pGLElBQUlGLEtBQUtLLE1BQU0sS0FBSyxHQUFHLE9BQU87SUFDOUIsTUFBTUMsTUFBTU4sS0FBS08sTUFBTSxDQUFDLENBQUNDLEdBQUdDLElBQU1ELElBQUlDLEdBQUc7SUFDekMsTUFBTUMsTUFBTUMsS0FBS0MsS0FBSyxDQUFDTixNQUFNTixLQUFLSyxNQUFNO0lBQ3hDLE9BQU9LO0FBQ1Q7QUFFZSxlQUFlRyxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUMsSUFBSTtRQUNGLE1BQU1sQixNQUFNbUIsS0FBS25CLEdBQUc7UUFDcEIsSUFBSXhDLE1BQU1DLElBQUksSUFBSXVDLE1BQU14QyxNQUFNRSxFQUFFLEdBQUdILEtBQUs7WUFDdEMsT0FBTzJELElBQUl6QyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFMEMsUUFBUTtnQkFBTSxHQUFHNUQsTUFBTUMsSUFBSTtZQUFDO1FBQzVEO1FBRUEsTUFBTTRELFVBQVUsTUFBTUMsUUFBUUMsVUFBVSxDQUFDO1lBQ3ZDM0M7WUFDQU07WUFDQVc7U0FDRDtRQUVELHlFQUF5RTtRQUN6RSxNQUFNMkIsUUFBUUgsUUFBUWpCLEdBQUcsQ0FBQyxDQUFDaEMsR0FBR3FEO1lBQzVCLElBQUlyRCxFQUFFSyxNQUFNLEtBQUssZUFBZUwsRUFBRVcsS0FBSyxFQUFFO2dCQUN2QyxPQUFPO29CQUFFRCxNQUFNVixFQUFFVyxLQUFLLENBQUNELElBQUk7b0JBQUVDLE9BQU9DLE9BQU9aLEVBQUVXLEtBQUssQ0FBQ0EsS0FBSztnQkFBRTtZQUM1RDtZQUNBLHVDQUF1QztZQUN2QyxPQUFPO2dCQUFFRCxNQUFNLENBQUMsTUFBTSxFQUFFMkMsTUFBTSxFQUFFLENBQUM7Z0JBQUcxQyxPQUFPO1lBQUU7UUFDL0M7UUFFQSx3REFBd0Q7UUFDeEQsTUFBTTBCLE1BQU1lLE1BQU1kLE1BQU0sQ0FBQyxDQUFDQyxHQUFHQyxJQUFNRCxJQUFLM0IsQ0FBQUEsT0FBTzBDLFFBQVEsQ0FBQ2QsRUFBRTdCLEtBQUssSUFBSTZCLEVBQUU3QixLQUFLLEdBQUcsSUFBSTtRQUNqRixNQUFNNEMsTUFBTWIsS0FBS0MsS0FBSyxDQUFDTixNQUFNO1FBRTdCLE1BQU1tQixVQUFVO1lBQ2RDLGNBQWM7WUFDZEMsaUJBQWlCSDtZQUNqQkksU0FBU1A7UUFDWDtRQUVBaEUsUUFBUTtZQUFFQyxNQUFNbUU7WUFBU2xFLElBQUlzQztRQUFJO1FBQ2pDLE9BQU9rQixJQUFJekMsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFMEMsUUFBUTtZQUFPLEdBQUdRLE9BQU87UUFBQztJQUMxRCxFQUFFLE9BQU9uQyxLQUFLO1FBQ1pDLFFBQVFDLEtBQUssQ0FBQyxvQkFBb0JGO1FBQ2xDLE9BQU95QixJQUFJekMsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFaUIsT0FBTztZQUFzQnFDLFNBQVN2QyxJQUFJRyxPQUFPO1FBQUM7SUFDbEY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZuZy1jbG9uZS8uL3BhZ2VzL2FwaS9mbmcvYWdncmVnYXRlLmpzPzBlNWYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQWdncmVnYXRlIEZlYXIgJiBHcmVlZCBpbmRleCBmcm9tIG11bHRpcGxlIHNvdXJjZXMuXG4vLyBTb3VyY2VzOiBBbHRlcm5hdGl2ZS5tZSAoaW1wbGVtZW50ZWQpICsgMyBhZGRpdGlvbmFsIHNvdXJjZXMgKHN0dWJzKSB0byBiZSBkZWZpbmVkLlxuLy8gRW52IHZhcnM6IHNldCBBUEkga2V5cy9zZWNyZXRzIGluIC5lbnYubG9jYWw7IHNlZSBSRUFETUUgYW5kIC5lbnYuZXhhbXBsZS5cblxuY29uc3QgVFRMID0gNSAqIDYwICogMTAwMDsgLy8gNSBtaW51dGVzIGNhY2hlXG5sZXQgY2FjaGUgPSB7IGRhdGE6IG51bGwsIHRzOiAwIH07XG5cbi8vIEhlbHBlcjogc2FmZSBmZXRjaCB3aXRoIHRpbWVvdXRcbmFzeW5jIGZ1bmN0aW9uIHNhZmVGZXRjaCh1cmwsIG9wdGlvbnMgPSB7fSwgdGltZW91dE1zID0gMTAwMDApIHtcbiAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgY29uc3QgdCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCB0aW1lb3V0TXMpO1xuICB0cnkge1xuICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCh1cmwsIHsgLi4ub3B0aW9ucywgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCB9KTtcbiAgICBpZiAoIXIub2spIHRocm93IG5ldyBFcnJvcihgSFRUUCAke3Iuc3RhdHVzfWApO1xuICAgIHJldHVybiBhd2FpdCByLmpzb24oKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBjbGVhclRpbWVvdXQodCk7XG4gIH1cbn1cblxuLy8gU291cmNlIDE6IEFsdGVybmF0aXZlLm1lXG5hc3luYyBmdW5jdGlvbiBzb3VyY2VBbHRlcm5hdGl2ZSgpIHtcbiAgY29uc3QganNvbiA9IGF3YWl0IHNhZmVGZXRjaCgnaHR0cHM6Ly9hcGkuYWx0ZXJuYXRpdmUubWUvZm5nLz9saW1pdD0xJyk7XG4gIGNvbnN0IGl0ZW0gPSBqc29uPy5kYXRhPy5bMF07XG4gIGlmICghaXRlbSkgdGhyb3cgbmV3IEVycm9yKCdhbHQubWU6IGVtcHR5IGRhdGEnKTtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiAnYWx0ZXJuYXRpdmUubWUnLFxuICAgIHZhbHVlOiBOdW1iZXIoaXRlbS52YWx1ZSksXG4gICAgcmF3OiBpdGVtLFxuICB9O1xufVxuXG4vLyBTb3VyY2UgMjogQ29pbk1hcmtldENhcCBGZWFyICYgR3JlZWQgKGhpc3RvcmljYWwpIOKAlCB1c2UgbGF0ZXN0IHZhbHVlXG5hc3luYyBmdW5jdGlvbiBzb3VyY2VUd28oKSB7XG4gIGNvbnN0IGtleSA9IHByb2Nlc3MuZW52LkNNQ19BUElfS0VZO1xuICBpZiAoIWtleSkgcmV0dXJuIG51bGw7XG4gIFxuICB0cnkge1xuICAgIC8vIFRyeSB0aGUgbGF0ZXN0IGVuZHBvaW50IGZpcnN0XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHNhZmVGZXRjaCgnaHR0cHM6Ly9wcm8tYXBpLmNvaW5tYXJrZXRjYXAuY29tL3YzL2ZlYXItYW5kLWdyZWVkL2xhdGVzdCcsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ1gtQ01DX1BST19BUElfS0VZJzoga2V5LFxuICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ01DIEFQSSByZXNwb25zZSBzaGFwZTogeyBkYXRhOiB7IHZhbHVlOiBudW1iZXIsIHZhbHVlX2NsYXNzaWZpY2F0aW9uOiBzdHJpbmcsIHRpbWVzdGFtcDogc3RyaW5nLCAuLi4gfSB9XG4gICAgY29uc3QgaXRlbSA9IGpzb24/LmRhdGE7XG4gICAgaWYgKCFpdGVtIHx8IGl0ZW0udmFsdWUgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdDTUM6IGVtcHR5IGRhdGEnKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogJ2NvaW5tYXJrZXRjYXAnLFxuICAgICAgdmFsdWU6IE51bWJlcihpdGVtLnZhbHVlKSxcbiAgICAgIHJhdzogaXRlbSxcbiAgICB9O1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDb2luTWFya2V0Q2FwIEFQSSBlcnJvcjonLCBlcnIubWVzc2FnZSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLy8gU291cmNlIDM6IENvaW5TdGF0cyBGZWFyIGFuZCBHcmVlZFxuYXN5bmMgZnVuY3Rpb24gc291cmNlVGhyZWUoKSB7XG4gIGNvbnN0IGtleSA9IHByb2Nlc3MuZW52LkNPSU5TVEFUU19BUElfS0VZO1xuICBpZiAoIWtleSkgcmV0dXJuIG51bGw7XG4gIFxuICB0cnkge1xuICAgIC8vIENvaW5TdGF0cyBBUEkgZW5kcG9pbnQgZm9yIEZlYXIgJiBHcmVlZCBJbmRleFxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCBzYWZlRmV0Y2goJ2h0dHBzOi8vb3BlbmFwaXYxLmNvaW5zdGF0cy5hcHAvaW5zaWdodHMvZmVhci1hbmQtZ3JlZWQnLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdYLUFQSS1LRVknOiBrZXksXG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBFeHBlY3RlZCBzaGFwZTogeyBub3c6IHsgdmFsdWU6IG51bWJlciwgLi4uIH0sIC4uLiB9XG4gICAgY29uc3QgdmFsID0ganNvbj8ubm93Py52YWx1ZTtcbiAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignQ29pblN0YXRzOiBubyBub3cudmFsdWUgZmllbGQnKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogJ2NvaW5zdGF0cycsXG4gICAgICB2YWx1ZTogTnVtYmVyKHZhbCksXG4gICAgICByYXc6IGpzb24sXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcignQ29pblN0YXRzIEFQSSBlcnJvcjonLCBlcnIubWVzc2FnZSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWdncmVnYXRlKHZhbHVlcykge1xuICBjb25zdCBudW1zID0gdmFsdWVzLm1hcCh2ID0+IHYudmFsdWUpLmZpbHRlcih2ID0+IHR5cGVvZiB2ID09PSAnbnVtYmVyJyAmJiAhTnVtYmVyLmlzTmFOKHYpKTtcbiAgaWYgKG51bXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgY29uc3Qgc3VtID0gbnVtcy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcbiAgY29uc3QgYXZnID0gTWF0aC5yb3VuZChzdW0gLyBudW1zLmxlbmd0aCk7XG4gIHJldHVybiBhdmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmIChjYWNoZS5kYXRhICYmIG5vdyAtIGNhY2hlLnRzIDwgVFRMKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBjYWNoZWQ6IHRydWUsIC4uLmNhY2hlLmRhdGEgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChbXG4gICAgICBzb3VyY2VBbHRlcm5hdGl2ZSgpLFxuICAgICAgc291cmNlVHdvKCksXG4gICAgICBzb3VyY2VUaHJlZSgpLFxuICAgIF0pO1xuXG4gICAgLy8gQnVpbGQgYSAzLXNsb3Qgc291cmNlcyBhcnJheSwgZGVmYXVsdGluZyB1bmRlZmluZWQgdG8gdmFsdWUgMCBwZXIgc3BlY1xuICAgIGNvbnN0IHNsb3RzID0gcmVzdWx0cy5tYXAoKHIsIGlkeCkgPT4ge1xuICAgICAgaWYgKHIuc3RhdHVzID09PSAnZnVsZmlsbGVkJyAmJiByLnZhbHVlKSB7XG4gICAgICAgIHJldHVybiB7IG5hbWU6IHIudmFsdWUubmFtZSwgdmFsdWU6IE51bWJlcihyLnZhbHVlLnZhbHVlKSB9O1xuICAgICAgfVxuICAgICAgLy8gRGVmYXVsdCBmb3IgdW5kZWZpbmVkL21pc3Npbmcgc291cmNlXG4gICAgICByZXR1cm4geyBuYW1lOiBgc291cmNlJHtpZHggKyAxfWAgLCB2YWx1ZTogMCB9O1xuICAgIH0pO1xuXG4gICAgLy8gQWdncmVnYXRlIGFjcm9zcyBhbGwgMyBzb3VyY2VzLCBldmVuIGlmIHNvbWUgYXJlIHplcm9cbiAgICBjb25zdCBzdW0gPSBzbG90cy5yZWR1Y2UoKGEsIGIpID0+IGEgKyAoTnVtYmVyLmlzRmluaXRlKGIudmFsdWUpID8gYi52YWx1ZSA6IDApLCAwKTtcbiAgICBjb25zdCBhZ2cgPSBNYXRoLnJvdW5kKHN1bSAvIDMpO1xuXG4gICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgIHNvdXJjZV9jb3VudDogMyxcbiAgICAgIGFnZ3JlZ2F0ZV92YWx1ZTogYWdnLFxuICAgICAgc291cmNlczogc2xvdHMsXG4gICAgfTtcblxuICAgIGNhY2hlID0geyBkYXRhOiBwYXlsb2FkLCB0czogbm93IH07XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgY2FjaGVkOiBmYWxzZSwgLi4ucGF5bG9hZCB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcignYWdncmVnYXRlIGVycm9yOicsIGVycik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdhZ2dyZWdhdGlvbl9mYWlsZWQnLCBkZXRhaWxzOiBlcnIubWVzc2FnZSB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlRUTCIsImNhY2hlIiwiZGF0YSIsInRzIiwic2FmZUZldGNoIiwidXJsIiwib3B0aW9ucyIsInRpbWVvdXRNcyIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0Iiwic2V0VGltZW91dCIsImFib3J0IiwiciIsImZldGNoIiwic2lnbmFsIiwib2siLCJFcnJvciIsInN0YXR1cyIsImpzb24iLCJjbGVhclRpbWVvdXQiLCJzb3VyY2VBbHRlcm5hdGl2ZSIsIml0ZW0iLCJuYW1lIiwidmFsdWUiLCJOdW1iZXIiLCJyYXciLCJzb3VyY2VUd28iLCJrZXkiLCJwcm9jZXNzIiwiZW52IiwiQ01DX0FQSV9LRVkiLCJoZWFkZXJzIiwidW5kZWZpbmVkIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibWVzc2FnZSIsInNvdXJjZVRocmVlIiwiQ09JTlNUQVRTX0FQSV9LRVkiLCJ2YWwiLCJub3ciLCJhZ2dyZWdhdGUiLCJ2YWx1ZXMiLCJudW1zIiwibWFwIiwidiIsImZpbHRlciIsImlzTmFOIiwibGVuZ3RoIiwic3VtIiwicmVkdWNlIiwiYSIsImIiLCJhdmciLCJNYXRoIiwicm91bmQiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiRGF0ZSIsImNhY2hlZCIsInJlc3VsdHMiLCJQcm9taXNlIiwiYWxsU2V0dGxlZCIsInNsb3RzIiwiaWR4IiwiaXNGaW5pdGUiLCJhZ2ciLCJwYXlsb2FkIiwic291cmNlX2NvdW50IiwiYWdncmVnYXRlX3ZhbHVlIiwic291cmNlcyIsImRldGFpbHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/fng/aggregate.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffng%2Faggregate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffng%2Faggregate.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();